{"singlePage": [], "startSite": "", "filingNum": "", "onePageListNum": 15, "commentLabelColor": "#006b75", "yearColorList": ["#bc4c00", "#0969da", "#1f883d", "#A333D0"], "i18n": "CN", "dayTheme": "light", "nightTheme": "dark", "urlMode": "pinyin", "script": "", "style": "", "bottomText": "", "showPostSource": 1, "title": "\u5bf8\u886b\u7684\u4e2a\u4eba\u7b14\u8bb0", "displayTitle": "\u5bf8\u886b", "subTitle": "\u7ae5\u8bdd\u662f\u4e00\u79cd\u751f\u6d3b\u6001\u5ea6\uff0c\u4ec5\u6b64\u800c\u5df2\u3002", "homeUrl": "https://cnsn521.github.io", "avatarUrl": "https://img2.imgtp.com/2024/03/14/Zv6AQqce.ico", "faviconUrl": "https://img2.imgtp.com/2024/03/14/Zv6AQqce.ico", "GMEEK_VERSION": "last", "postListJson": {"P1": {"htmlDir": "docs/post/zai-Debian11-shang-an-zhuang-pei-zhi-KVM-xu-ni-ji.html", "label": "cnsn", "labelColor": "#c2e0c6", "postTitle": "\u5728Debian11\u4e0a\u5b89\u88c5\u914d\u7f6eKVM\u865a\u62df\u673a", "postUrl": "post/zai-Debian11-shang-an-zhuang-pei-zhi-KVM-xu-ni-ji.html", "postSourceUrl": "https://github.com/cnsn521/cnsn521.github.io/issues/1", "commentNum": 0, "description": "### **\u4e00\u3001\u524d\u63d0**\r\n\r\n\u68c0\u67e5\u662f\u5426\u6ee1\u8db3\u865a\u62df\u5316\u8981\u6c42, \u53ef\u4ee5\u6839\u636e\u5982\u4e0b\u6b65\u9aa4\u9a8c\u8bc1:\r\n\r\n\u68c0\u67e5\u662f\u5426\u5f00\u542f\u865a\u62df\u5316,\u5982\u679c\u503c\u5927\u4e8e0\u5219\u652f\u6301\u865a\u62df\u5316\uff0c\u5426\u5219\u9700\u8981\u5728BIOS\u4e2d\u5f00\u542f\u865a\u62df\u5316, \u91cd\u542f\u91cd\u65b0\u6267\u884c\u5982\u4e0b\u547d\u4ee4\r\n`egrep -c '(vmx|svm)' /proc/cpuinfo`\r\n\u68c0\u67e5CPU\u7c7b\u578b: \u5982\u679c\u662fIntel\u7684CPU, \u8f93\u51faVMX;\u5982\u679c\u662fAMD\u7684CPU, \u8f93\u51faSVM\r\n\r\n`grep -E --color '(vmx|svm)' /proc/cpuinfo`\r\n### **\u4e8c\u3001\u5b89\u88c5\u76f8\u5173\u5305**\r\n\r\n```\r\napt update\r\napt install -y qemu-kvm libvirt-clients libvirt-daemon-system bridge-utils virtinst libvirt-daemon\r\n```\r\n\r\n\u5b89\u88c5GUI\u7ba1\u7406\u5de5\u5177(\u53ef\u9009)\r\n\r\n\u6ca1\u7528\u684c\u9762\u7684\u4e0d\u7528\u88c5GUI\r\n\r\n`apt install virt-manager -y`\r\n### **\u4e09\u3001\u914d\u7f6e\u7f51\u7edc**\r\n\r\n\u8981\u5217\u51fa\u8981\u5728 KVM \u865a\u62df\u673a\u4e2d\u4f7f\u7528\u7684\u53ef\u7528\u7f51\u7edc\uff0c\u8bf7\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\r\n\r\n`virsh net-list --all`\r\n\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u662f\u4e0d\u6d3b\u8dc3\u7684\uff0c\u9700\u8981\u542f\u52a8\r\n\r\n```\r\nvirsh net-start default\r\nvirsh net-autostart default\r\n```\r\n\u6267\u884c\u4e0a\u8ff0\u547d\u4ee4\u540e\u7ed3\u679c\u5982\u4e0b\r\n\r\n```\r\nroot@debian 13:14 \u279c  ~ virsh net-list --all\r\n Name      State    Autostart   Persistent\r\n--------------------------------------------\r\n default   active   yes         yes\r\n```\r\n\u52a0\u8f7d\u5185\u6838\u6a21\u5757vhost_net\uff0c\u63d0\u9ad8\u7f51\u7edc\u6027\u80fd\r\n`modprobe vhost_net`\r\n# \u68c0\u67e5\u662f\u5426\u52a0\u8f7d\u6210\u529f\r\n`lsmod | grep vhost`\r\n\u914d\u7f6e\u6865\u63a5\u7f51\u7edc\r\nKVM\u81ea\u5e26\u6709\u4e00\u4e2a\u5f00\u7bb1\u5373\u7528\u7684virbr0\u6865\u63a5\u7f51\u7edc\u63a5\u53e3, \u4f46\u662f\u9ed8\u8ba4\u5206\u914dip\u4e0d\u592a\u6ee1\u8db3\u9700\u6c42\uff0c\u9700\u8981\u65b0\u5efa\u4e00\u4e2a\r\n\u7f16\u8f91/etc/network/interfaces\r\n\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u65b0\u589e\u5982\u4e0b, \u6211\u9700\u8981dhcp\u5206\u914dip(\u53ef\u4ee5\u662f\u9759\u6001ip)\r\n```\r\nauto br0\r\niface br0 inet dhcp\r\n  bridge_ports wlp1s0\r\n```\r\n\u66f4\u6539\u5b8c\u6210\u540e, \u91cd\u542f\u7f51\u7edc\r\n\r\n```\r\nsystemctl restart networking.service\r\nip a\r\n```\r\n### **\u56db\u3001\u4ece\u955c\u50cf\u521b\u5efa\u865a\u62df\u673a**\r\n\r\n\u521b\u5efaLinux\u865a\u62df\u673a\r\n\r\n# \u521b\u5efa\u865a\u62df\u673a\u78c1\u76d8\r\n```\r\nqemu-img create -f qcow2 /var/lib/libvirt/images/debian11.qcow2 20G\r\n\r\nvirt-install \\\r\n--name debian11 \\\r\n--memory memory=1024,currentMemory=512 \\\r\n--disk path=/var/lib/libvirt/images/debian11.qcow2,size=20 \\\r\n--vcpus 1 \\\r\n--os-type linux \\\r\n--os-variant debian10 \\\r\n--network bridge=br0,model=virtio \\\r\n--graphics none \\\r\n--console pty,target_type=serial \\\r\n--location 'http://mirrors.tencent.com/debian/dists/bullseye/main/installer-amd64/' \\\r\n--extra-args 'console=ttyS0,115200n8 serial' \\\r\n--debug\r\n```\r\n\r\n\u521b\u5efawindows\u865a\u62df\u673a\r\n```\r\nvirt-install \\\r\n--name win10 \\\r\n--ram 2048 \\\r\n--disk path=/var/lib/libvirt/images/win10.qcow2,size=20 \\\r\n--vcpus 2 \\\r\n--os-type windows \\\r\n--os-variant win10 \\\r\n--network bridge=br0,model=virtio \\\r\n--graphics none \\\r\n--console pty,target_type=serial \\\r\n--cdrom /home/ysicing/Downloads/Win10_21H1_Chinese(Simplified)_x64.iso \\\r\n--extra-args 'console=ttyS0,115200n8 serial'\r\n```\r\n\r\n\u5f00\u542fvnc\r\n\r\n```\r\nvirsh vncdisplay win10\r\n\u5bfc\u5165\u865a\u62df\u673a\r\nvirt-install \\\r\n--name debian11 \\\r\n--ram 2048 \\\r\n--disk path=/var/lib/libvirt/images/debian11.qcow2,size=20 \\\r\n--vcpus 2 \\\r\n--os-type linux \\\r\n--os-variant debian11 \\\r\n--network bridge=br0,model=virtio \\\r\n--graphics none \\\r\n--console pty,target_type=serial \\\r\n--import\r\n```\r\n\r\n\u5bfc\u51fa\u865a\u62df\u673a\u4e3aqcow2\r\n\r\n`virt-clone --original debian11 --name debian11-clone --file /var/lib/libvirt/images/debian11-clone.qcow2`\r\n### **\u4e94\u3001\u5e38\u89c1\u9ad8\u7ea7\u64cd\u4f5c**\r\n\u67e5\u770b\u865a\u62df\u673a\r\n`virsh list --all`\r\n\u6267\u884c\u4e0a\u8ff0\u547d\u4ee4\u540e\u7ed3\u679c\u5982\u4e0b\r\n\r\n```\r\nroot@debian 13:14 \u279c  ~ virsh list --all\r\n Id   Name      State\r\n------------------------\r\n 2    debian11  running\r\n```\r\n\u9500\u6bc1\u865a\u62df\u673a\r\n```\r\nvirsh destroy debian11\r\nvirsh undefine debian11\r\n```\r\n\u5173\u95ed\u865a\u62df\u673a\r\n`virsh shutdown debian11`\u3002", "top": 0, "createdAt": 1709706748, "style": "", "script": "", "createdDate": "2024-03-06", "dateLabelColor": "#bc4c00"}, "P2": {"htmlDir": "docs/post/you-img-jing-xiang-gua-zai-feng-zhuang-\uff0c-bing-jia-zai-dao-kvm-zhong.html", "label": "cnsn", "labelColor": "#c2e0c6", "postTitle": "\u7531img\u955c\u50cf\u6302\u8f7d\u5c01\u88c5\uff0c\u5e76\u52a0\u8f7d\u5230kvm\u4e2d", "postUrl": "post/you-img-jing-xiang-gua-zai-feng-zhuang-%EF%BC%8C-bing-jia-zai-dao-kvm-zhong.html", "postSourceUrl": "https://github.com/cnsn521/cnsn521.github.io/issues/2", "commentNum": 0, "description": "### **\u4e00\u3001\u6302\u8f7d\u5c01\u88c5**\r\n\r\n1.\u5b89\u88c5\u4f9d\u8d56\u9879\uff1a\r\n\r\n \u786e\u4fdd\u4f60\u7684\u7cfb\u7edf\u4e0a\u5b89\u88c5\u4e86QEMU\u548c\u76f8\u5e94\u7684\u5de5\u5177\u3002", "top": 0, "createdAt": 1710402044, "style": "", "script": "", "createdDate": "2024-03-14", "dateLabelColor": "#bc4c00"}, "P3": {"htmlDir": "docs/post/\u3010-jiao-ben-shou-ji-\u3011-chang-yong-jiao-ben-da-quan- - -dang-an.html", "label": "cnsn", "labelColor": "#c2e0c6", "postTitle": "\u3010\u811a\u672c\u6536\u96c6\u3011\u5e38\u7528\u811a\u672c\u5927\u5168 - \u6863\u6848", "postUrl": "post/%E3%80%90-jiao-ben-shou-ji-%E3%80%91-chang-yong-jiao-ben-da-quan-%20-%20-dang-an.html", "postSourceUrl": "https://github.com/cnsn521/cnsn521.github.io/issues/3", "commentNum": 0, "description": "\u6b22\u8fce\u8054\u7cfb TG@hostlocc\r\n\r\nmoeclub\u5927\u4f6c\u7684\u811a\u672c\r\n------------\r\n\r\n```\r\nbash <(wget --no-check-certificate -qO- 'https://raw.githubusercontent.com/MoeClub/Note/master/InstallNET.sh') -d 12 -v 64 -p \u5bc6\u7801 -port \u7aef\u53e3 -a -firmware\r\n```\r\n\r\n[leitbogioro\u5927\u4f6c\u7684\u811a\u672c](https://www.nodeseek.com/post-9383-1)\uff08\u63a8\u8350\uff09\r\n------------------------------------------------------------\r\n\r\n```\r\nwget --no-check-certificate -qO InstallNET.sh 'https://raw.githubusercontent.com/leitbogioro/Tools/master/Linux_reinstall/InstallNET.sh' && chmod a+x InstallNET.sh && bash InstallNET.sh -debian 12 -pwd '\u5bc6\u7801'\r\n```\r\n\r\n[beta.gs\u5927\u4f6c\u7684\u811a\u672c](https://git.beta.gs/)\r\n------------------------------------\r\n\r\n```\r\nwget --no-check-certificate -O NewReinstall.sh https://raw.githubusercontent.com/fcurrk/reinstall/master/NewReinstall.sh && chmod a+x NewReinstall.sh && bash NewReinstall.sh\r\n```\r\n\r\n[5k\u54e5\u7684\u811a\u672c](https://soclearn.org/1keydd/) \u98ce\u9669\u8b66\u544a\uff1a\u6b64\u4eba\u5728loc\u7b49\u8bba\u575b\u53e3\u7891\u4e0d\u826f\uff0c\u591a\u6b21\u9a82\u4eba\u3002", "top": 0, "createdAt": 1710403534, "style": "", "script": "", "createdDate": "2024-03-14", "dateLabelColor": "#bc4c00"}}, "singeListJson": {}, "prevUrl": "disabled", "nextUrl": "disabled"}